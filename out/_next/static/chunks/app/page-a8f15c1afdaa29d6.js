(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3201:function(e,t,s){Promise.resolve().then(s.bind(s,5820))},5820:function(e,t,s){"use strict";s.d(t,{default:function(){return g}});var r=s(7437);function n(e){let{currentPage:t,totalPages:s,onPageChange:n}=e;return s<=1?null:(0,r.jsxs)("div",{className:"flex justify-center items-center gap-4 mt-4 text-gray-700",children:[(0,r.jsx)("button",{onClick:()=>n(t-1),disabled:1===t,className:"px-4 py-2 bg-gray-200 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-300",children:"Назад"}),(0,r.jsxs)("span",{className:"font-semibold",children:["Страница ",t," из ",s]}),(0,r.jsx)("button",{onClick:()=>n(t+1),disabled:t===s,className:"px-4 py-2 bg-gray-200 rounded disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-300",children:"Вперед"})]})}var a=s(5361);function l(e){let{onResize:t,width:s,children:n,...l}=e;return s?(0,r.jsx)(a.Resizable,{width:s,height:0,onResize:t,draggableOpts:{enableUserSelectHack:!1},children:(0,r.jsx)("th",{...l,style:{width:"".concat(s,"px")},children:n})}):(0,r.jsx)("th",{...l,children:n})}s(3362);var c=s(2265);function i(e){let{isOpen:t,onClose:s,children:n}=e;return((0,c.useEffect)(()=>{let e=e=>{"Escape"===e.key&&s()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s]),t)?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 backdrop-blur-sm",onClick:s,children:(0,r.jsxs)("div",{className:"relative w-full max-w-lg rounded-lg bg-white p-6 shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("button",{onClick:s,className:"absolute top-3 right-3 text-2xl font-bold text-gray-500 hover:text-gray-800",children:"\xd7"}),n]})}):null}class o extends Error{constructor(e,t){super(t),this.name="HttpError",this.status=e}}let d=async e=>{let t,{limit:s,skip:r,query:n,sortBy:a,order:l}=e,c=new URLSearchParams({limit:String(s),skip:String(r),select:"firstName,lastName,maidenName,age,gender,phone,email,address"});a&&l&&!n&&(c.append("sortBy",a),c.append("order",l));try{t=await fetch("".concat(n?"https://dummyjson.com/users/search?q=".concat(n):"https://dummyjson.com/users","?").concat(c.toString()))}catch(e){throw console.error(e),Error("Ошибка сети. Проверьте ваше интернет-соединение.")}if(!t.ok){let e="Ошибка на сервере: ".concat(t.status," ").concat(t.statusText);throw new o(t.status,e)}return t.json()},h=async e=>{try{let t=await fetch("https://dummyjson.com/users/".concat(e));if(!t.ok)throw new o(t.status,"Не удалось получить данные пользователя");return t.json()}catch(e){if(e instanceof o)throw e;throw Error("Ошибка сети. Проверьте ваше интернет-соединение.")}};function u(e){let{userId:t}=e,{user:s,isLoading:n,error:a}=function(e){let[t,s]=(0,c.useState)(null),[r,n]=(0,c.useState)(!0),[a,l]=(0,c.useState)(null);return(0,c.useEffect)(()=>{if(!e){n(!1);return}(async()=>{n(!0),l(null);try{let t=await h(e);s(t)}catch(e){l(e instanceof Error?e:Error("Произошла неизвестная ошибка"))}finally{n(!1)}})()},[e]),{user:t,isLoading:r,error:a}}(t);return n?(0,r.jsx)("div",{children:"Загрузка данных пользователя..."}):a?(0,r.jsx)("div",{className:"text-red-500",children:a.message}):s?(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-6",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("img",{src:s.image,alt:"Avatar",className:"w-40 h-40 rounded-full object-cover border-4 border-gray-200"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold mb-2",children:"".concat(s.lastName," ").concat(s.firstName," ").concat(s.maidenName)}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Возраст:"})," ",s.age]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Адрес:"})," ","".concat(s.address.country,", ").concat(s.address.city,", ").concat(s.address.address,", ").concat(s.address.postalCode)]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Рост:"})," ",s.height," см"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Вес:"})," ",s.weight," кг"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Телефон:"})," ",s.phone]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Email:"})," ",s.email]})]})]}):null}function x(e){let{message:t,onRetry:s}=e;return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 border border-red-200 bg-red-50 rounded-lg text-center",children:[(0,r.jsx)("p",{className:"text-red-700 font-semibold mb-4",children:"Произошла ошибка"}),(0,r.jsx)("p",{className:"text-red-600 mb-6",children:t}),s&&(0,r.jsx)("button",{onClick:s,className:"px-6 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Попробовать снова"})]})}let m=[400,100,120,200,250,230],p=[{id:"name",label:"ФИО",sortKey:"lastName"},{id:"age",label:"Возраст",sortKey:"age"},{id:"gender",label:"Пол",sortKey:"gender"},{id:"phone",label:"Возраст",sortKey:"phone"},{id:"email",label:"Email"},{id:"contry_and_city",label:"Страна и город"}],y=e=>{let{direction:t}=e;return"asc"===t?(0,r.jsx)("span",{className:"ml-1",children:"▲"}):"desc"===t?(0,r.jsx)("span",{className:"ml-1",children:"▼"}):null};function g(){let{users:e,error:t,isLoading:s,columnWidths:a,selectedUserId:o,sortConfig:h,pagination:g,handlers:b}=function(){let[e,t]=(0,c.useState)([]),[s,r]=(0,c.useState)(null),[n,a]=(0,c.useState)(!0),[l,i]=(0,c.useState)(1),[o,h]=(0,c.useState)(0),[u,x]=(0,c.useState)({key:null,direction:"none"}),[p,y]=(0,c.useState)(""),[g,b]=(0,c.useState)(m),[j,f]=(0,c.useState)(null),w=(0,c.useCallback)(async()=>{a(!0),r(null);let e={limit:10,skip:(l-1)*10,query:p,sortBy:u.key&&"none"!==u.direction?u.key:void 0,order:u.key&&"none"!==u.direction?u.direction:void 0};try{let s=await d(e);t(s.users),h(s.total)}catch(e){r(e instanceof Error?e:Error("Произошла неизвестная ошибка"))}finally{a(!1)}},[l,p,u]);return(0,c.useEffect)(()=>{w()},[w]),{users:e,error:s,isLoading:n,columnWidths:g,selectedUserId:j,sortConfig:u,pagination:{currentPage:l,totalPages:Math.ceil(o/10),onPageChange:i},handlers:{loadUsers:w,handleSort:e=>{i(1);let t="asc";u.key===e&&"asc"===u.direction?t="desc":u.key===e&&"desc"===u.direction&&(t="none"),x({key:e,direction:t})},handleSearchChange:e=>{y(e.target.value),i(1)},handleResize:e=>(t,s)=>{let{size:r}=s;b(t=>{let s=[...t];return s[e]=r.width,s})},handleRowClick:e=>f(e),handleCloseModal:()=>f(null)}}}();return(0,r.jsxs)("div",{className:"max-w-[1400px] w-full mx-auto p-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Таблица пользователей"}),s&&0===e.length?(0,r.jsx)("div",{className:"p-4 text-center",children:"Загрузка... ⏳"}):t?(0,r.jsx)(x,{message:t.message,onRetry:b.loadUsers}):s||0!==e.length?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"overflow-x-auto border border-gray-300 rounded-lg",children:(0,r.jsxs)("table",{className:"border-gray-300 table-fixed",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{className:"bg-gray-100",children:p.map((e,t)=>(0,r.jsxs)(l,{width:a[t],onResize:b.handleResize(t),className:"border px-4 py-2 cursor-pointer hover:bg-gray-200",onClick:()=>(null==e?void 0:e.sortKey)&&b.handleSort(e.sortKey),children:[e.label,(null==e?void 0:e.sortKey)&&(0,r.jsx)(y,{direction:h.key===e.sortKey?h.direction:"none"})]},e.id))})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-100 cursor-pointer",onClick:()=>b.handleRowClick(e.id),children:[(0,r.jsx)("td",{className:"border px-4 py-2 overflow-hidden text-ellipsis whitespace-nowrap",children:"".concat(e.lastName," ").concat(e.firstName," ").concat(e.maidenName)}),(0,r.jsx)("td",{className:"border px-4 py-2 text-center overflow-hidden text-ellipsis whitespace-nowrap",children:e.age}),(0,r.jsx)("td",{className:"border px-4 py-2 overflow-hidden text-ellipsis whitespace-nowrap",children:e.gender}),(0,r.jsx)("td",{className:"border px-4 py-2 overflow-hidden text-ellipsis whitespace-nowrap",children:e.phone}),(0,r.jsx)("td",{className:"border px-4 py-2 overflow-hidden text-ellipsis whitespace-nowrap",children:e.email}),(0,r.jsx)("td",{className:"border px-4 py-2 overflow-hidden text-ellipsis whitespace-nowrap",children:"".concat(e.address.country,", ").concat(e.address.city)})]},e.id))})]})}),(0,r.jsx)(n,{...g})]}):(0,r.jsx)("div",{className:"p-4 text-center",children:"Пользователи не найдены."}),(0,r.jsx)(i,{isOpen:null!==o,onClose:b.handleCloseModal,children:null!==o?(0,r.jsx)(u,{userId:o}):null})]})}}},function(e){e.O(0,[672,875,971,117,744],function(){return e(e.s=3201)}),_N_E=e.O()}]);